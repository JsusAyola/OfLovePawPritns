<div class="history-container">
  <h2>Historial de Predicciones</h2>

  <table class="predictions-table" *ngIf="!isLoading && !errorMessage && predictionHistory.length > 0">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Tipo</th>
        <th>Raza</th>
        <th>Peso</th>
        <th>Vacunas</th>
        <th>Nivel de Actividad</th>
        <th>Mensaje</th>
        <th>Probabilidad</th>
        <th>Estado</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let pred of predictionHistory">
        <td>{{ pred.date | date:'short' }}</td>
        <td>{{ pred.inputData?.type || '-' }}</td>
        <td>{{ pred.inputData?.breed || '-' }}</td>
        <td>{{ pred.inputData?.weight || '-' }}</td>
        <td>{{ pred.inputData?.vaccines || '-' }}</td>
        <td>{{ pred.inputData?.activityLevel || '-' }}</td>
        <td>{{ pred.message || '-' }}</td>
        <td>{{ (pred.result?.confidence * 100) | number:'1.1-1' }}%</td>
        <td>{{ pred.inputData?.status || 'desconocido' }}</td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="isLoading" class="loading-message">
    Cargando historial de predicciones...
  </div>

  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && !errorMessage && predictionHistory.length === 0" class="no-data">
    No hay predicciones en el historial.
  </div>
</div>
